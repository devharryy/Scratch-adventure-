 <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Scratch Adventure</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
html,body{
  margin:0;
  height:100vh;
  background:#d3d3d3;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  font-family:system-ui,Arial;
  text-align:center;
}

.main-title{font-size:42px;font-weight:800;color:#000;margin-bottom:4px;}
.sub-title{font-size:18px;color:#333;margin-bottom:20px;}
.instruct{font-size:42px;font-weight:800;color:#000;margin-bottom:25px;}

.wrap{position:relative;width:420px;height:380px;}

.heart-white{
  position:absolute;
  inset:0;
  background:#ff0000;
  clip-path:path("M210 300 C 0 180 60 -20 210 90 C 360 -20 420 180 210 300 Z");
}

.heart-mask{
  position:absolute;
  inset:0;
  clip-path:path("M210 300 C 0 180 60 -20 210 90 C 360 -20 420 180 210 300 Z");
  display:flex;
  align-items:center;
  justify-content:center;
  pointer-events:none;
  overflow:hidden;
  background:#fff;
}

.heart-mask img{
  width:100%;
  height:100%;
  object-fit:contain;
  display:none;
}

/* ✅ AUTO 2–3 LINE DARE FIX */
.heart-mask .dare{
  max-width:70%;
  font-size:16px;
  font-weight:700;
  line-height:1.4;
  text-align:center;
  word-wrap:break-word;
  white-space:normal;
  display:none;
}

canvas{
  position:absolute;
  inset:0;
  touch-action:none;
}

button{
  margin-top:25px;
  padding:12px 28px;
  border:none;
  border-radius:6px;
  background:#ff0000;
  color:#fff;
  font-size:16px;
}

.credit{margin-top:8px;font-size:12px;color:#666;}
</style>
</head>
<body>

<div class="main-title">Scratch Adventure</div>
<div class="sub-title">Only for couples</div>
<div class="instruct">Scratch the field with your finger</div>

<div class="wrap">
  <div class="heart-white"></div>
  <div class="heart-mask">
    <img id="heartImg">
    <div class="dare" id="heartDare"></div>
  </div>
  <canvas id="scratch"></canvas>
</div>

<button onclick="location.reload()">Refresh</button>
<div class="credit">created by @urluv_herrryyy</div>

<script>
/* ===== DARE LIST ===== */
const dares = [
  "Look into each other's eyes and try not to kiss",
  "Reveal one secret honestly",
  "Whisper one thing you like about me",
  "Hold my hand tightly for one minute",
  "Say my name in the sweetest way",
  "Sit close and match my breathing",
  "Tell me what you noticed first about me",
  "Smile at me without speaking",
  "Give a gentle forehead touch",
  "Promise one fun plan together"
];

/* ✅ NO-REPEAT SYSTEM */
let remainingDares = [...dares];

function getUniqueDare(){
  if(remainingDares.length === 0){
    remainingDares = [...dares]; // reset only after all shown
  }
  const index = Math.floor(Math.random() * remainingDares.length);
  return remainingDares.splice(index,1)[0];
}

const dareEl = document.getElementById("heartDare");
dareEl.textContent = getUniqueDare();
dareEl.style.display = "block";

/* ===== SCRATCH CANVAS ===== */
const canvas = document.getElementById("scratch");
const ctx = canvas.getContext("2d");
canvas.width = 420;
canvas.height= 380;

/* RED SCRATCH LAYER */
ctx.fillStyle = "#ff0000";
ctx.beginPath();
ctx.moveTo(210,300);
ctx.bezierCurveTo(0,180,60,-20,210,90);
ctx.bezierCurveTo(360,-20,420,180,210,300);
ctx.closePath();
ctx.fill();

ctx.globalCompositeOperation = "destination-out";

let scratching = false;
canvas.onpointerdown = ()=> scratching = true;
canvas.onpointerup = canvas.onpointerleave = ()=> scratching = false;

canvas.onpointermove = e=>{
  if(!scratching) return;
  const r = canvas.getBoundingClientRect();
  ctx.beginPath();
  ctx.arc(e.clientX-r.left, e.clientY-r.top, 26, 0, Math.PI*2);
  ctx.fill();
};
</script>
</body>
</html>
